<!DOCTYPE html>
<html>
<head>
    <title>Wave on line. 2 lesson Three.js</title>
    <style>
        body { margin: 0; }
        canvas { width: 100%; height: 100% }
    </style>
</head>	<body>
<script src="../libraries/three.js-r87/build/three.min.js"></script>
<script>
    var scene = new THREE.Scene();
    var camera = new THREE.PerspectiveCamera( 75, window.innerWidth/window.innerHeight, 0.1, 1000 );
   // camera.position.x = 20;
    var radius = 20;
    camera.position.set (radius, radius , radius);
    camera.lookAt(new THREE.Vector3(0,0,0));

    var renderer = new THREE.WebGLRenderer();
    renderer.setSize( window.innerWidth, window.innerHeight );
    document.body.appendChild( renderer.domElement );

    var geometry = new THREE.BoxGeometry( 1, 1, 1 );
    var material = new THREE.MeshBasicMaterial( {vertexColors: THREE.FaceColors } );


    //Массив кубов
    var cubes = [] , n = 60;
    for (var i=0; i<n; i++) {
        cubes.push(new THREE.Mesh(geometry, material));
        cubes[i].position.x = -n/2 + i;
        for (var j=0; j<6; j++){
            var color1 = new THREE.Color();
            color1.setRGB(Math.random(), Math.random(),Math.random());
            cubes[i].geometry.faces[2*j].color     = color1;
            cubes[i].geometry.faces[2*j+1].color = color1 ;

        }


        cubes[i].geometry.colorsNeedUpdate = true;
        cubes[i].material.needsUpdate = true;
        scene.add(cubes[i]);
    }


    //Длина окружности
    var l = cubes[cubes.length-1].position.x - cubes[0].position.x, k = 0;
    var animate = function () {
        requestAnimationFrame( animate );
        k+=0.05;
        //График sin
        for (var i=0; i<n; i++)
        {

            cubes[i].scale.y =6+Math.sin (360/cubes.length*i+k)/2;
            cubes[i].position.y = Math.sin (360/cubes.length*i+k)/4;

        }
        //Возможность вращения
        camera.position.z = Math.sin (Math.PI/6*i+k/2) * radius;
        camera.position.x = Math.cos (Math.PI/6*i+k/2) * radius;
        camera.lookAt(new THREE.Vector3(0,0,0));

        renderer.render(scene, camera);
    };
    animate();
</script>
</body>